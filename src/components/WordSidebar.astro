---
/**
 * Word Sidebar Wrapper (React Islands Container)
 *
 * 架构模式：React in Astro (Islands Architecture)
 *
 * 核心逻辑：
 * 这个 Astro 组件充当以 React 编写的复杂交互组件 (`WordReflectionCard`, `ArticleInfoButton`) 的容器。
 * 为什么使用 Wrapper？
 * 1. 布局控制：Astro 负责静态的 Grid 布局和边框样式 (Static Shell)。
 * 2. 交互水合 (Hydration)：通过 `client:idle` 指令，我们告诉 Astro 仅在浏览器主线程空闲时加载并执行 React 代码。
 *    这对于侧边栏这种非首屏关键路径 (Critical Path) 的组件非常重要，它不会阻塞主要内容的 LCP (Largest Contentful Paint)。
 */
import WordReflectionCard from "./WordReflectionCard";

interface Definition {
    pos: string;
    definition: string;
}

interface Word {
    word: string;
    phonetic: string;
    definitions: Definition[];
}

interface Props {
    words: Word[];
    articleId?: string;
}

const { words, articleId: _articleId } = Astro.props;
---

<div class="space-y-4">
    <!-- 标题 -->
    <div
        class="flex items-center justify-between pb-2 mb-4 border-b-2 border-slate-900"
    >
        <h2 class="text-xs font-bold uppercase tracking-widest text-slate-900">
            Margin Notes
        </h2>
    </div>

    <!-- 词汇列表 (React Components) -->
    <div class="space-y-1">
        {
            words.map((word) => (
                <WordReflectionCard
                    client:idle
                    word={word.word}
                    phonetic={word.phonetic}
                    definitions={word.definitions}
                />
            ))
        }
    </div>
</div>
